<aside>

- 웹이라는 세계가 어떤 기술로 구성되었는가?
- HTTP는 어떻게 탄생했고 성장해 왔는가?
</aside>

## 1.1 웹은 HTTP로 나타낸다

웹 브라우저는 주소 입력란에 지정된 URL을 입력했을 때 웹 서버로부터 리소스를 얻어 웹 페이지를 표시한다. 

### HTTP

→ Hypertext Transfer Protocol 

→ 웹에서 클라이언트부터 서버까지 일련의 흐름을 결정하고 있는 약속(Protocol)

## 1.2 HTTP는 이렇게 태어났고 성장했다

### 1.2.1 웹은 지식 공유를 위해 고안되었다

→ 멀리 떨어져잇는 동료 연구자와 지식을 공유할 수 있는 시스템에서 시작. (CERN의 한 팀) 

HyperText : 여러 문서를 상호간에 관련 짓는 것.

WWW :  World Wide Web, 이를 구성하는 기술로서 HTML, HTTP, URL 가 제안되었다.

### 1.2.2 웹이 성장한 시대

최초의 웹 서버와 웹 브라우저 (1990) 

HTML 1.0 (1990)

모자이크 (Mosaic) : 현재 사용하는 웹 브라우저의 선조 (1993)

넷스케이프 내비게이터 1.0 (1994)

인터넷 익스플로러1.0/2.0 - 마이크로소프트 (1995)

아파치(Apache) 0.2 : 웹 서버 표준

HTML 2.0 발행

모질라 파이어폭스 (2004)

인터넷 익스플로러 v6, 7 …

Chrome

Opera

Safari

### 1.2.3 진보 안하는 HTTP

- HTTP/0.9
    
    → 정식 사양서는 아니었다.
    
- HTTP/1.0
    
    → 이것으로 RFC1945 발행 - 초기의 사양이지만 현재에도 많은 서버에서 현역으로 가동되고 있는 프로토콜 사양
    
- HTTP/1.1
    
    → 현재 가장 많이 사용되는 버전. 
    
    당시 사양 : RFC2068, 개정 사양 : RFC2616
    
- HTTP/2.0
    
    → 상용화는 아직인 상황
    

⇒ 초기엔 주로 텍스트를 전송하기 위한 프로토콜. 여러 응용 방법을 고려해 기능이 계속 추가 되었고, 현재는 웹의 틀을 넘어 다양하게 사용되는 프로토콜.

## 1.3 네트워크의 기본은 TCP/IP

- 인터넷을 포함한 일반적으로 사용되는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있다.
    - 예. HTTP

### 1.3.1 TCP/IP는 프로토콜의 집합

- 프로토콜
    - 컴퓨터, 네트워크 기기가 상호간 통신을 위해서는 서로 같은 방법으로 통신해야 한다.
        
        → 통신을 위해서 규칙이 필요하기에 프로토콜이 필요.
        
    - 케이블 규격, IP 주소 지정 방법, 떨어진 상대를 찾기 위한 방법, 상대에 도달하는 순서, 웹을 표시하기 위한 순서
- TCP/IP
    - 인터넷과 관련된 프로토콜을 모은 것.
    - IP를 사용한 통신에서 사용되고 있는 프로토콜의 총칭.

### 1.3.2 계층으로 관리하는 TCP/IP

→ 4계층으로 구성

→ 어딘가 변경점이 생겼을 때 변경된 계층만 바꾸어 전체를 바꾸는 비효율적인 과정을 수행하지 않아도 된다.

→ 계층이 연결되어 있는 부분만 결정되어 각 계층의 내부는 자유롭게 설계 가능. 각 계층이 담당하는 부분만 고려하여 설계하면 된다. (다른 계층에 대한 고려 필요X)

- 애플리케이션 계층
    - 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임 결정
        - FTP, DNS, HTTP
- 트랜스포트 계층
    - 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이 데이터 흐름 제공.
        - TCP, UDP
- 네트워크 계층
    - 네트워크 상에서 패킷의 이동을 다룸.
    - 어떤 경로를 거쳐 수신지까지 패킷을 보낼지 결정.
        - 패킷
- 링크 계층
    - 네트워크에 접속하는 하드웨어적인 면을 다룸.
        - 디바이스 드라이버, NIC (네트워크 인터페이스 카드), 물리적으로 보이는 부분

### 1.3.3 TCP/IP 통신의 흐름

→ TCP/IP로 통신할 때 계층을 순서대로 거쳐 상대와 통신.

송신 : 애플리케이션 계층에서부터 내려간다

수신 : 애플리케이션 계층으로 올라간다.

- HTTP 예시.
1. 송신 클라이언트의 애플리케이션 계층 (HTTP)에서 웹 페이지 보고 싶다 HTTP 리퀘스트.
2. 트랜스포트 계층(TCP)에서는 애플리케이션 계층에서 받은 데이터(HTTP 메세지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달.
3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해 링크 계층에 전달.
4. 수신 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달해 애플리케이션 계층까지 도달.
5. 애플리케이션 계층에 도달하면 클라이언트가 발신한 HTTP 리퀘스트 내용 수신 가능.

→ 송신할 때 각 계층을 거칠 때 해당 계층에 필요한 정보를 헤더에 넣어 추가한다. (캡슐화)

→ 수신할 때는 헤더를 삭제하며 올라온다. (비캡슐화)

## 1.4 HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS

### 1.4.1 배송을 담당하는 IP

- IP (Internet Protocol)
    - 네트워크 계층
    - IP 주소와 IP는 다른 것. 프로토콜의 명칭이다.
    - 역할 : 하나 하나의 패킷을 상대방에게 전달하는 것.
        - IP 주소, MAC 주소를 이용해 상대방에게 전달.
        - IP 주소: 각 노드에 부여된 주소. (변경 가능)
        - MAC 주소: 각 네트워크 카드에 할당된 고유의 주소. (변경 불가)
    
- 통신은 ARP를 이용해 MAC 주소에서 한다
    - 통신 상대가 같은 랜선 내에 있을 가능성 적음
        
        → 여러 대의 컴퓨터와 네트워크 기기를 중계하여 상대방에게 도착.
        
        → 중계하는 동안 다음으로 중계할 곳의 MAC 주소를 사용해 목적지를 찾아간다.
        
        ⇒ 이때, ARP (Address Resolution Protocol) 사용.
        
        - ARP : 수신지의 IP 주소를 바탕으로 MAC주소 조사.

- 그 누구도 인터넷 전체를 파악하고 있지는 않다
    - 라우팅
        
        → 목적지까지 중계를 하는 도중에 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만 알고있다. (택배 배송과 유사)
        

### 1.4.2 신뢰성을 담당하는 TCP

- TCP(Transfer Control Protocol)
    - 트랜스포트 계층
    - 신뢰성 있는 바이트 스트림 서비스 제공
        - 바이트 스트림 서비스 : 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리.
        - 신뢰성 있는 서비스 : 상대방에게 보내는 서비스.
    
    ⇒ 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고, 정확하게 도착했는지 확인하는 역할.
    
- 상대에게 데이터를 확실하게 보내는 것이 일이다.
    - 3-way handshaking 을 통해 상대에게 확실하게 데이터를 전송.
        - 3-way handshaking : 패킷을 보낸 후 보내졌는지 여부를 상대에게 확인하는 방법
            - ‘SYN’, ‘ACK’ 라는 TCP 플래그를 사용
            - 송신 측에서 최초 ‘SYN’ 플래그로 상대에게 접속함과 동시에 패킷 전달
            - 수신 측에서 ‘SYN/ACK’ 플래그로 송신측에 접속함과 동시에 패킷 수신 사실 전달
            - 송신 측이 ‘ACK’ 플래그를 보내 패킷 교환이 완료되었음 전달
            
            → 이 과정에서 통신이 끊어지면 TCP는 동시에 같은 수순으로 패킷 재전송.
            
        
        TCP는 이외에도 통신의 신뢰성을 보증하기 위한 다양한 시스템 존재.
        

## 1.5 이름 해결을 담당하는 DNS

- DNS (Domain Name System)
    - 응용 계층에서 도메인 이름과 IP 주소 이름 확인 제공
    - IP 주소와 별도로 지어진 호스트, 도메인 이름 존재.
    - 도메인명에서 IP 주소를 조사, IP 주소로부터 도메인명 조사 서비스 제공.

## 1.6 각각과 HTTP와의 관계

### 전체 흐름

IP, TCP, DNS가 HTTP를 이용해 통신 할 때 어떤 역할을 하는가

1. 클라이언트가 특정 URL 입력하여 웹페이지 요청
2. 클라이언트 IP 주소 요청 → DNS
3. DNS → IP 주소 반환
4. HTTP : 담당 웹 서버에 보낼 HTTP 메시지 작성
5. TCP : 통신하기 쉽게 HTTP 메시지 패킷으로 분해 → 조각내어 일련번호 부여. → 패킷 전달
6. IP : 상대가 어디 있는지 찾아 중계하며 배송
7. TCP : 상대방으로부터 패킷 수신 → 도착한 패킷 조립 (일련번호 참고)
8. HTTP : 웹 서버에 대한 리퀘스트 내용 처리 

→ 클라이언트 → 서버 전달 완료.

⇒ 서버 → 클라이언트로 TCP/IP 통신 순서대로 반환. (위 과정 진행)

## 1.7 URI와 URL

### 1.7.1 URI는 리소스 식별자

- URI (Uniform Resource Identifiers)
    - Uniform : 통일된 서식을 결정하는 것.
        - 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급 가능.
        - 새로운 스키마 (http:, ftp; 리소스를 얻기 위한 수단) 도입 용이하게 만듦.
    - Resource : ‘식별 가능한 모든 것’
        - 도큐먼트 파일, 이미지, 서비스 등 다른 것과 구별할 수 있는 모든 것. (복수의 집합 포함)
    - Identifier : 식별 가능한 것을 참조하는 오브젝트 (식별자)
    
    ⇒ 스키마를 나타내는 리소스를 식별하기 위한 식별자 (URI)
    

### 1.7.2 URL 포맷

- 완전 수식 절대 URL
    - http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch1
        - http:// → 스키마
        - user:pass → 자격정보 (크리덴셜)
        - www.example.jp → 서버 주소
        - 80 → 서버 포트
        - /dir/index.htm → 계층적 파일 패스
        - uid=1 → 쿼리 문자열
        - ch1 → 프래그먼트 식별자

- 스키마
    - http: , https: 를 통해 프로토콜 지시.
    - 대소문자 무시
    - data: , javascript: 같이 데이터, 프로그램 지정 가능
- 자격정보 (크리덴셜)
    - 서버로부터 리소스를 취득하기 위해 필요한 것.
    - 유저명과 패스워드 지정 가능(옵션)
- 서버 주소
    - 완전 수식 형식 URI에서 서버 주소 지정 필요.
    - DNS 이름 or IPv4 주소 or IPv6 주소로 지정.
- 서버 포트
    - 서버의 접속 대상이 되는 네트워크 포트 번호 지정.
    - 생략 가능 → 디폴트 포트 사용
- 계층적 파일 패스
    - 특정 리소스를 식별하기 위해 서버 상의 파일 패스 지정.
    - UNIX 디렉토리 지정 방법과 유사
- 쿼리 문자열
    - 파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주기 위해 사용 (옵션)
- 프래그먼트 식별자
    - 취득한 리소스에서 서브 리소스(document 중간에 위치)를 가리키기 위해 프래그먼트 식별자 사용 (옵션)

- 실제 사양대로 되지 않을 수도 있다.
    - RFC(Request for Comments) 문서에 기술 사양을 몇 가지 정해뒀다.
    - 인터넷 설계서 (RFC) 에 기술된 대로 만들지 않으면 통신 못하는 상황 발생 가능
    
    ⇒ RFC에 적혀있는 대로 만들어야 한다.